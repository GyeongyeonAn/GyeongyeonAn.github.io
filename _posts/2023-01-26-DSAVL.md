---
layout: single
title:  "[자료구조] 균형 탐색 트리 (AVL)"
---


## 1) 균형 탐색 트리(AVL)
- 균형을 잡기 위해 트리 모습을 수정
- 탐색 효율 O(lgN)을 보장
- 삽입, 삭제 될 때마다 균형 파괴여부 검사하는 시간이 필요
- 트리를 재구성(Rebuilding)하는 시간이 필요

### 균형 인수(Balance Factor)
- 트리의 균형을 점검할 때 사용하는 인수
- 노드 마다 오른쪽 서브 트리의 높이에서 왼쪽 서브 트리의 높이를 뺀 것
- AVL 트리에서 균형 인수의 값은 반드시 -1, 0, +1 중 하나임

![image](https://user-images.githubusercontent.com/55589616/214830810-817487bb-6cea-4f1e-90e4-1811017ef60b.png)


### AVL의 회전
- 회전(Rotation)에 의한 균형 회복
- 불균형 노드의 위치를 기준으로 분류
    - LL : 불균형 노드의 왼쪽 서브 트리의 왼쪽 서브 트리의 높이 증가
    - RR : 불균형 노드의 왼쪽 서브 트리의 오른쪽 서브 트리의 높이 증가
    - RL : 불균형 노드의 오른쪽 서브 트리의 왼쪽 서브 트리의 높이 증가
    - RR : 불균형 노드의 오른쪽 서브 트리의 오른쪽 서브 트리의 높이 증가

![image](https://user-images.githubusercontent.com/55589616/214831634-d61e2bfe-7bbb-4dc0-b993-a08c5d28256a.png)
![image](https://user-images.githubusercontent.com/55589616/214831702-2cecf001-9008-4beb-8cd7-224c3f94a8bf.png)

![image](https://user-images.githubusercontent.com/55589616/214833297-5518da21-e87c-4eee-b219-13e26b1a3d42.png)


## 2) 자체 조정 트리(Self-Restructuring Tree) 
- 모든 노드가 동일한 빈도(Frequency)로 탐색되는 것이 아님
- 무조건 균형을 유지할 것이 아니라 자주 탐색되는 노드를 루트 근처에 갖다 놓는 것이 더욱 유리


### 조정 방법 1
- 어떤 노드가 탐색될 때마다 그 노드를 바로 위 부모 노드로 올리는 방법
- 한번의 회전만으로 충분함

![image](https://user-images.githubusercontent.com/55589616/214833977-c019fbd5-34f9-465d-9226-4deb7468dd2b.png)


### 조정 방법 2
- 어떤 노드가 탐색되면 그 노드를 아예 전체 트리의 루트로 올리는 방법
- 한번 탐색된 노드는 이후에 탐색될 가능성이 높다고 간주
- 연속적인 회전이 필요

![image](https://user-images.githubusercontent.com/55589616/214834149-c48c6e6a-223b-40c3-ad64-9827430d5057.png)

- 한계점
    - 트리의 균형 면에서 불리
    - 노드 1의 탐색 결과 트리의 높이가 줄지 않고, 그대로 유지됨

![image](https://user-images.githubusercontent.com/55589616/214834313-825d3c4a-f27a-4ece-b1b0-4c85b266ceac.png)


## 3) 스플레이(Splay) 기법
- 조정 방법 2를 개선하여 탐색된 노드를 루트로 올리되, 한번에 두 레벨씩 위로 올리는 방법
- LChild, RChild 링크가 벌어져서(Splay) 활용됨으로 인해 균형에 유리
- 트리의 균형보다는 노드 자체의 탐색 빈도를 기준으로 함
- 어떤 노드가 상대적으로 다른 노드 보다 자주 사용된다면 유리한 구조
- 모두 동일한 빈도로 사용된다면 여전히 트리의 균형이 중요

![image](https://user-images.githubusercontent.com/55589616/214835166-9f4f8046-8ef1-438c-90ce-12189ce43027.png)


### 지그지그(Zig-Zig)
- Left-Left 또는 Right-Right
- 두 레벨을 올리기 위해서 올려질 노드의 부모 노드를 먼저 회전시키고, 노드 3은 나중에 회전시킴

![image](https://user-images.githubusercontent.com/55589616/214835636-1fba2256-49a4-4760-a50c-8dfa8b673d05.png)


### 지그재그(Zig-Zag)
- 올리고자 하는 노드가 그보다 두 레벨 위의 노드로부터 Left-Right 또는 Right-Left 경로를 따라 내려올 때를 부름
- 지그재그에 대한 처리는 AVL의 LR 또는 RL회전과 완전히 동일
- 두 레벨씩 위로 올렸을 때, 최종적으로 루트 노드와 레벨 차이가 하나만 날 수도 있음
    - 이 경우 AVL과 마찬가지로 한번만 회전을 가하면 됨

![image](https://user-images.githubusercontent.com/55589616/214835882-de846b5e-6188-46fd-8210-7dc3bb443b4a.png)

